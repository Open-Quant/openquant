---
import Layout from '../layouts/Layout.astro';
const base = import.meta.env.BASE_URL.endsWith("/")
  ? import.meta.env.BASE_URL.slice(0, -1)
  : import.meta.env.BASE_URL;
---
<Layout title="OpenQuant-rs Documentation" description="Production-grade documentation for OpenQuant-rs: APIs, examples, methodology, and release guidance.">
  <section class="hero">
    <h1>OpenQuant-rs Documentation</h1>
    <p class="muted">Rust-first quantitative finance toolkit migrated from mlfinlab with tracked parity, CI validation, and benchmark governance.</p>
  </section>

  <div class="grid">
    <article class="card">
      <h3>What You Get</h3>
      <p>Core quantitative workflows for labeling, sampling, risk metrics, portfolio construction, structural breaks, and model diagnostics.</p>
    </article>
    <article class="card">
      <h3>Current State</h3>
      <p>Tracked module migration parity is complete. The roadmap parity list is empty and production baseline checks are active.</p>
    </article>
    <article class="card">
      <h3>How To Use This Docs Site</h3>
      <p>Start with <a href={`${base}/getting-started`}>Getting Started</a>, then move to <a href={`${base}/examples`}>Examples</a> and <a href={`${base}/modules`}>Module Guide</a>.</p>
    </article>
  </div>

  <h2>Documentation Map</h2>
  <table>
    <thead>
      <tr>
        <th>Section</th>
        <th>When to Use It</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a href={`${base}/getting-started`}>Getting Started</a></td>
        <td>Install, validate, and run the first meaningful commands.</td>
      </tr>
      <tr>
        <td><a href={`${base}/modules`}>Module Guide</a></td>
        <td>Understand the library structure by functional area.</td>
      </tr>
      <tr>
        <td><a href={`${base}/api-reference`}>API Reference</a></td>
        <td>Find major public functions and types quickly.</td>
      </tr>
      <tr>
        <td><a href={`${base}/examples`}>Examples</a></td>
        <td>Copy practical pipeline examples for research and production prototyping.</td>
      </tr>
      <tr>
        <td><a href={`${base}/migration-parity`}>Parity</a></td>
        <td>Review migration status and parity governance.</td>
      </tr>
      <tr>
        <td><a href={`${base}/performance`}>Performance</a></td>
        <td>Understand benchmark methodology and regression checks.</td>
      </tr>
      <tr>
        <td><a href={`${base}/publishing`}>Publishing</a></td>
        <td>Release the crate and docs with confidence.</td>
      </tr>
      <tr>
        <td><a href={`${base}/contributing`}>Contributing</a></td>
        <td>Follow coding, testing, and documentation standards.</td>
      </tr>
      <tr>
        <td><a href={`${base}/faq`}>FAQ</a></td>
        <td>Resolve operational questions quickly.</td>
      </tr>
    </tbody>
  </table>

  <h2>Primary Validation Commands</h2>
  <pre><code class="language-bash"># Fast CI equivalent
cargo test --workspace --lib --tests --all-features -- --skip test_sadf_test

# Long-running SADF hotspot (explicit slow path)
cargo test -p openquant --test structural_breaks test_sadf_test -- --ignored

# Benchmarks and threshold check
cargo bench -p openquant --bench perf_hotspots --bench synthetic_ticker_pipeline
python3 scripts/collect_bench_results.py --criterion-dir target/criterion --out benchmarks/latest_benchmarks.json --allow-list benchmarks/benchmark_manifest.json
python3 scripts/check_bench_thresholds.py --baseline benchmarks/baseline_benchmarks.json --latest benchmarks/latest_benchmarks.json --max-regression-pct 25</code></pre>
</Layout>
