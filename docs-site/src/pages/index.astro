---
import Layout from '../layouts/Layout.astro';
const base = import.meta.env.BASE_URL.endsWith("/")
  ? import.meta.env.BASE_URL.slice(0, -1)
  : import.meta.env.BASE_URL;
---
<Layout title="OpenQuant-rs Documentation" description="Production-grade documentation for OpenQuant-rs: APIs, examples, methodology, and release guidance.">
  <section class="hero">
    <h1>OpenQuant-rs Documentation</h1>
    <p class="muted">Subject-first documentation aligned to core AFML domains so navigation follows quant research workflows, not project notes.</p>
  </section>

  <h2>Subject Dividers (Used Across All Core Pages)</h2>
  <table>
    <thead>
      <tr>
        <th>Subject Divider</th>
        <th>AFML Orientation</th>
        <th>What You Find</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Event-Driven Data and Labeling</td>
        <td>Ch. 2-3</td>
        <td>Bars, filters, triple-barrier labeling, sample events.</td>
      </tr>
      <tr>
        <td>Sampling, Validation and ML Diagnostics</td>
        <td>Ch. 4, 7</td>
        <td>Sequential bootstrapping, purged CV, feature importance, model fingerprinting.</td>
      </tr>
      <tr>
        <td>Position Sizing and Trade Construction</td>
        <td>Ch. 10</td>
        <td>Probability/dynamic/budget/reserve bet sizing, ETF and futures roll helpers.</td>
      </tr>
      <tr>
        <td>Portfolio Construction and Risk</td>
        <td>Ch. 16 + risk overlays</td>
        <td>CLA, HRP, HCAA, ONC, mean-variance family, VaR/ES/CDaR, backtest stats.</td>
      </tr>
      <tr>
        <td>Market Microstructure, Dependence and Regime Detection</td>
        <td>Microstructure + diagnostics</td>
        <td>Kyle/Amihud/Hasbrouck lambdas, entropy features, codependence, SADF/CUSUM-style regimes.</td>
      </tr>
    </tbody>
  </table>

  <h2>Where To Read</h2>
  <div class="grid">
    <article class="card">
      <h3><a href={`${base}/modules`}>Subjects (AFML)</a></h3>
      <p>Conceptual map from subject to OpenQuant modules.</p>
    </article>
    <article class="card">
      <h3><a href={`${base}/module`}>Module Pages</a></h3>
      <p>One page per module with formulas, API references, and code examples.</p>
    </article>
    <article class="card">
      <h3><a href={`${base}/api-reference`}>API by Subject</a></h3>
      <p>Primary functions and public types grouped by the same subject dividers.</p>
    </article>
    <article class="card">
      <h3><a href={`${base}/examples`}>Examples by Subject</a></h3>
      <p>Working snippets organized with the same domain taxonomy.</p>
    </article>
  </div>

  <h2>Engineering and Release Tracks</h2>
  <p><a href={`${base}/performance`}>Performance</a> and <a href={`${base}/publishing`}>Publishing</a> stay separate from the subject docs so research navigation remains clean.</p>

  <h2>Validation Commands</h2>
  <pre><code class="language-bash"># Fast CI equivalent
cargo test --workspace --lib --tests --all-features -- --skip test_sadf_test

# Long-running SADF hotspot (explicit slow path)
cargo test -p openquant --test structural_breaks test_sadf_test -- --ignored

# Benchmarks and threshold check
cargo bench -p openquant --bench perf_hotspots --bench synthetic_ticker_pipeline
python3 scripts/collect_bench_results.py --criterion-dir target/criterion --out benchmarks/latest_benchmarks.json --allow-list benchmarks/benchmark_manifest.json
python3 scripts/check_bench_thresholds.py --baseline benchmarks/baseline_benchmarks.json --latest benchmarks/latest_benchmarks.json --max-regression-pct 25</code></pre>
</Layout>
